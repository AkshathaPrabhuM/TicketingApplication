@(tasks: List[Task], taskForm: Form[Task])

@import helper._

@main("Ticketing System") {
<div ng-app="myApp" ng-controller="customersCtrl">

	<h1>Ticketing System</h1>
	
    <h3>Available Tickets</h3>
    <h4>@tasks.size() tickets(s)</h4>
    
    <table class="table table-striped">
  		<thead>
    		<tr>
      			<th>Edit</th>
      			<th>Customer Name</th>
      			<th>Comments</th>
      			<th>Creator</th>
      			<th>Assignee</th>
      			<th>Status</th>
   			</tr>
 	 	</thead>
  		<tbody>
  			@for(task <- tasks) {
    		<tr>
      			<td style="width: 25%;">
        			<button class="btn btn-info" ng-click="editUser('update', '@task.id', '@task.custName', '@task.comments', '@task.creator', '@task.assignee', '@task.status')">
          				<span class="glyphicon glyphicon-user"></span>  Assign
        			</button>
      			</td>
      			<td>@task.custName</td>
      			<td>@task.comments</td>
      			<td>@task.creator</td>
      			<td>@task.assignee</td>
      			<td>@task.status</td>
    		</tr>
    		}
  		</tbody>
	</table>
	
	    <table class="table table-striped">
  		<thead>
    		<tr>
      			<th>Edit</th>
      			<th>Customer Name</th>
      			<th>Comments</th>
      			<th>Creator</th>
      			<th>Assignee</th>
      			<th>Status</th>
   			</tr>
 	 	</thead>
  		<tbody>
  			@for(task <- tasks) {
    		<tr>
      			<td style="width: 25%;">
        			<button class="btn btn-primary" ng-click="editUser('update', '@task.id', '@task.custName', '@task.comments', '@task.creator', '@task.assignee', '@task.status')">
          				<span class="glyphicon glyphicon-pencil"></span>  Update
        			</button>
      			</td>
      			<td>@task.custName</td>
      			<td>@task.comments</td>
      			<td>@task.creator</td>
      			<td>@task.assignee</td>
      			<td>@task.status</td>
    		</tr>
    		}
  		</tbody>
	</table>
	
	<table class="table table-striped">
  		<thead>
    		<tr>
      			<th>Edit</th>
      			<th>Customer Name</th>
      			<th>Comments</th>
      			<th>Creator</th>
      			<th>Assignee</th>
      			<th>Status</th>
   			</tr>
 	 	</thead>
  		<tbody>
  			@for(task <- tasks) {
    		<tr>
      			<td style="width: 25%;">
      				<form class="form-horizontal" action="@routes.Application.deleteTask(task.id)" method="post">
        				<button class="btn btn-danger">
          					<span class="glyphicon glyphicon-minus-sign"></span>  Delete
        				</button>
        			</form>
      			</td>
      			<td>@task.custName</td>
      			<td>@task.comments</td>
      			<td>@task.creator</td>
      			<td>@task.assignee</td>
      			<td>@task.status</td>
    		</tr>
    		}
  		</tbody>
	</table>
	
    
    <h3>Create New Ticket:</h3>
	<form class="form-horizontal" action="@routes.Application.newTask()" method="post">
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Customer Name: </label>
    		<div class="col-sm-10">
    			<input type="text" name="custName" placeholder="Customer Name">
    		</div>
  		</div> 
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Comments: </label>
    		<div class="col-sm-10">
    			<input type="text" name="comments" placeholder="Comments (If Any)">
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Created By: </label>
    		<div class="col-sm-10">
    			<input type="text" name="creator" placeholder="Created By">
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Assigned To: </label>
    		<div class="col-sm-10">
    			<input type="text" name="assignee" placeholder="Assign To">
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Status: </label>
    		<div class="col-sm-10">
    			<input type="text" name="status" placeholder="Status">
    		</div>
  		</div>
  		<button class="btn btn-success">
			<span class="glyphicon glyphicon-save"></span>  Submit Ticket
		</button>
	</form>
	
	<h3>Update Ticket:</h3>
	<form class="form-horizontal" action="@routes.Application.updateTask()" method="post">
		<input type="text" name="id" ng-show="false" value ={{taskId}}>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Customer Name: </label>
    		<div class="col-sm-10">
    			<input type="text" name="custName" value={{custName}}>
    		</div>
  		</div> 
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Comments: </label>
    		<div class="col-sm-10">
    			<input type="text" name="comments" value={{comments}}>
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Created By: </label>
    		<div class="col-sm-10">
    			<input type="text" name="creator" value={{creator}}>
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Assigned To: </label>
    		<div class="col-sm-10">
    			<input type="text" name="assignee" value={{assignee}}>
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Status: </label>
    		<div class="col-sm-10">
    			<input type="text" name="status" value={{status}}>
    		</div>
  		</div>
  		<button class="btn btn-success">
			<span class="glyphicon glyphicon-upload"></span>  Update Ticket
		</button>
	</form>
	
	<h3>Update Assignee:</h3>
	<form class="form-horizontal" action="@routes.Application.updateTask()" method="post">
		<input type="text" name="id" ng-show="false" value ={{taskId}}>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Customer Name: </label>
    		<div class="col-sm-10">
    			<input type="text" name="custName" value={{custName}}>
    		</div>
  		</div> 
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Comments: </label>
    		<div class="col-sm-10">
    			<input type="text" name="comments" value={{comments}}>
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Created By: </label>
    		<div class="col-sm-10">
    			<input type="text" name="creator" value={{creator}}>
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Assigned To: </label>
    		<div class="col-sm-10">
    			<input type="text" name="assignee" value={{assignee}}>
    		</div>
  		</div>
  		<div class="form-group">
    		<label class="col-sm-2 control-label">Status: </label>
    		<div class="col-sm-10">
    			<input type="text" name="status" value={{status}}>
    		</div>
  		</div>
  		<button class="btn btn-success">
			<span class="glyphicon glyphicon-user"></span>  Assign Ticket
		</button>
	</form>
	
</div>    
<script>
angular.module('myApp', []).controller('customersCtrl', function($scope) {

$scope.editUser = function(action,id, custName, comments, creator, assignee, status) {
  if (action == 'update') {
    $scope.taskId= id;
    $scope.custName = custName;
    $scope.comments=comments;
    $scope.creator = creator;
    $scope.assignee = assignee;
    $scope.status = status;
  }
  else if(action=='assign')
  {
   $scope.taskId= id;
    $scope.custName = custName;
    $scope.comments=comments;
    $scope.creator = creator;
    $scope.assignee = assignee;
    $scope.status = status;
  }
};


});
</script>
}
